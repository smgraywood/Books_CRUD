<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %>
<body>
    <%- include('../partials/header') %>
    <section class="books-on-shelf">
        <div id="stack-container">
            <div class="book-in-stack" id="book-1"></div>
            <div class="book-in-stack" id="book-2">
                <button id="stack-button"> <%= stack.name.toUpperCase() %> </button>
            </div>
            <div class="book-in-stack" id="book-3"></div>
        </div>       
        <img
            src="../images/small-plant.png"
            alt="a small cartoon pothos plant in a brown pot"
            id="small-plant"
        />
        <div id="stack-container">
            <div class="book-in-stack" id="book-1"></div>
            <div class="book-in-stack" id="book-2">
                <a href="/stacks"><button id="stack-button">ALL THE STACKS</button></a>
            </div>
            <div class="book-in-stack" id="book-3"></div>
        </div>
    </section>
    <div class="shelf"></div>
    <h3><%= stack.name %></h3>
    <button>Update</button>
    <button>Delete</button>

    <div>
        <%# forEach loop within div will need adjustment %>
        <ul>
            <%  if(stack.books){ %>
                <% stack.books.forEach(book => { %>
                    <li><a href="/books/<%= book._id %>"><%= book.title %></a></li>
                <% }) %>
                <% }else {%>
                ADD SOME BOOKS TO YOUR STACK!
                <% } %>
        </ul>
        
        <form action="/stacks/<%=stack._id %>/books" method="POST">
            <select name="bookId">
                <%- books.map(b => `<option value="${b._id}"> ${b.title}</option>`) %>
            </select>
            <button type="submit">Add to Stack</button>
        </form>
    </div>

    <img
            class="large-plant-all-pages"
			src="../images/large-plant.png"
			alt="a large cartoon monstera plant in a blue pot"
		/>

    <%- include('../partials/footer') %>
</body>
</html>